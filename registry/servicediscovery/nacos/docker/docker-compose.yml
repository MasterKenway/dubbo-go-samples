version: "3"

services:
  zk:
    container_name: zk
    image: zookeeper:3.5
    ports:
      - "52181:2181"
    restart: on-failure

  nacos:
    image: nacos/nacos-server:1.4.1
    container_name: nacos
    environment:
      - PREFER_HOST_MODE=hostname
      - MODE=standalone
    ports:
      - "8848:8848"
    healthcheck:
      test: "curl --fail http://127.0.0.1:8848/nacos/v1/console/health/liveness || exit 1"
      interval: 5s
